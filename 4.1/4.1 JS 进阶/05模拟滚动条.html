<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
		     *{
		     	padding: 0;
		     	margin: 0;
		     }
			.box{
				width: 800px;
				height: 400px;
				border: 1px solid red;
				margin: 100px auto;
				position: relative;
				overflow: hidden;
			}
			.content{
				position: absolute;
				width: 740px;
				top: 0;
				left: 0;
				font-size: 14px;
				line-height: 150%;
				padding: 20px;
			}
			.content p{
				margin-bottom: 20px;
			}
			.bar{
				position: absolute;
				width: 20px;
				height: 400px;
				right: 0px;
				top: 0;
				background-color: #cccccc;
				cursor: default;
			}
			.bar b{
				position: absolute;
				width: 20px;
				height: 34px;
				background-color: salmon;
				cursor: default;
				
			}
		</style>
	</head>
	<body>
		<div id="box" class="box">
			<div id="bar" class="bar">
				<b id="barB"></b>
			</div>
			<div id="content" class="content">
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
				<p>我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒! 我曾触摸星辰，也曾见证过数千个太阳的光芒!</p>
			</div>
		</div>
		<script type="text/javascript">
			var box=document.getElementById("box");
			var content=document.getElementById("content");
			var barB=document.getElementById("barB");
			/*var rate=box.clientHeight/content.clientHeight;
			
			
			barB.style.height=box.clientHeight*rate+"px";
			var nowbarBtop=0;
			var nowcontenttop=0;
			barB.onmousedown=function(event){
				event=event||window.event;
				var deltaY=event.clientY-barB.offsetTop;
				document.onmousemove=function(event){
				event=event||window.event;
				nowbarBtop=event.clientY-deltaY;
				if (nowbarBtop<0){
					nowbarBtop=0;
				}else if (nowbarBtop>box.clientHeight-barB.clientHeight){
					    nowbarBtop=box.clientHeight-barB.clientHeight;
				    }
				    barB.style.top=nowbarBtop+"px";
				    nowcontenttop=-nowbarBtop/rate;
				    content.style.top=nowcontenttop+"px";
				    return false;
				}
			}
			document.onmouseup=function(event){
				document.onmousemove=null;
			}
			
			function mousewheelhandler(event){
				event=event||window.event;
				if(event.preventDefault){
					event.preventDefault()
				}else{
					event.returnValue=false;
				}
				if (event.wheelDelta) {
					var diretion=event.wheelDelta > 0 ? 1 : -1;
				}else if(event.detail){
					var diretion=event.detail > 0 ? -1 : 1;
				}
				nowbarBtop+=-20*diretion;
				if(nowbarBtop<0){
					nowbarBtop=0;
				}else if(nowbarBtop>box.clientHeight-barB.clientHeight){
					nowbarBtop=box.clientHeight-barB.clientHeight;
				}
				nowcontenttop=-nowbarBtop/rate;
				barB.style.top=nowbarBtop+"px";
				content.style.top=nowcontenttop+"px";
			}
			box.onmousewheel=mousewheelhandler;
			try{
				oDiv.addEventListener("DOMMouseScroll",mousewheelhandler,false);
			}catch(e){
				//TODO handle the exception
			}*/
			
			var rate=box.clientHeight/content.clientHeight;
			
			
			barB.style.height=box.clientHeight*rate+"px";
			var nowbarBtop=0;
			var nowcontenttop=0;
			barB.onmousedown=function(event){
				event=event||window.event;
				var deltaY=event.clientY-barB.offsetTop;
				document.onmousemove=function(event){
				event=event||window.event;
				nowbarBtop=event.clientY-deltaY;
				if (nowbarBtop<0){
					nowbarBtop=0;
				}else if (nowbarBtop>box.clientHeight-barB.clientHeight){
					    nowbarBtop=box.clientHeight-barB.clientHeight;
				    }
				    barB.style.top=nowbarBtop+"px";
				    nowcontenttop=-nowbarBtop/rate;
				    content.style.top=nowcontenttop+"px";
				    return false;
				}
			}
			document.onmouseup=function(event){
				document.onmousemove=null;
			}
			
			function mousewheelhandler(event){
				event=event||window.event;
				if(event.preventDefault){
					event.preventDefault()
				}else{
					event.returnValue=false;
				}
				if (event.wheelDelta) {
					var diretion=event.wheelDelta > 0 ? 1 : -1;
				}else if(event.detail){
					var diretion=event.detail > 0 ? -1 : 1;
				}
				nowbarBtop+=-20*diretion;
				if(nowbarBtop<0){
					nowbarBtop=0;
				}else if(nowbarBtop>box.clientHeight-barB.clientHeight){
					nowbarBtop=box.clientHeight-barB.clientHeight;
				}
				nowcontenttop=-nowbarBtop/rate;
				barB.style.top=nowbarBtop+"px";
				content.style.top=nowcontenttop+"px";
			}
			box.onmousewheel=mousewheelhandler;
			try{
				oDiv.addEventListener("DOMMouseScroll",mousewheelhandler,false);
			}catch(e){
				//TODO handle the exception
			}
		</script>
	</body>
</html>
